<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document & Image Processor</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <div class="container mt-5">
        <h1 id="document-image-processor" class="text-center mb-4">Document & Image Processor</h1>

        <form action="/upload" method="post" enctype="multipart/form-data">
            <div id="dropzone" class="dropzone">
                <input type="file" name="files" multiple accept=".pdf,.jpg,.jpeg,.png,.tiff,.tif" style="display: none;" id="fileInput">
                <p>Tap to Select Files</p>
            </div>
            <div id="upload-message" class="text-center"></div>
            <div class="form-group mt-3">
                <label for="FullName">זרוק איזה שם על הקובץ:</label>
                <input type="text" id="FullName" name="FullName" class="form-control" placeholder="קבלות יולי אוגוסט">
            </div>
            <button type="submit" class="btn btn-primary btn-block mt-3">Start Processing</button>
        </form>

        <hr>

        <h2 class="text-center mb-4">Process Receipts from Gmail</h2>
        <form action="/start-gmail-auth" method="post">
            <div class="form-group">
                <label for="email">Enter Your Gmail Address:</label>
                <input type="email" id="email" name="email" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-success btn-block">Authorize Gmail Access</button>
        </form>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        const dropzone = document.getElementById('dropzone');
        const fileInput = document.getElementById('fileInput');
        const uploadMessage = document.getElementById('upload-message');

        dropzone.addEventListener('click', () => fileInput.click());

        fileInput.addEventListener('change', () => {
            if (fileInput.files.length > 0) {
                uploadMessage.textContent = `${fileInput.files.length} file(s) selected`;
            } else {
                uploadMessage.textContent = '';
            }
        });

        dropzone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropzone.classList.add('dragover');
        });

        dropzone.addEventListener('dragleave', () => {
            dropzone.classList.remove('dragover');
        });

        dropzone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropzone.classList.remove('dragover');
            fileInput.files = e.dataTransfer.files;
            uploadMessage.textContent = `${fileInput.files.length} file(s) selected`;
        });
    </script>
</body>
</html>